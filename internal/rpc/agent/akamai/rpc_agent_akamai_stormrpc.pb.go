// Code generated by protoc-gen-stormrpc. DO NOT EDIT.

package akamai

import (
	context "context"
	fmt "fmt"
	stormrpc "github.com/actatum/stormrpc"
	rpcmodels "github.com/sapcc/andromeda/internal/rpcmodels"
)

// RPCAgentAkamaiClient is the client API for RPCAgentAkamai service.
type RPCAgentAkamaiClient interface {
	// GetDNSMetrics retrieves the total DNS metrics for a given project and timeframe.
	GetDNSMetricsAkamai(ctx context.Context, in *rpcmodels.GetDNSMetricsRequest, opts ...stormrpc.CallOption) (*rpcmodels.GetDNSMetricsResponse, error)
	GetCidrs(ctx context.Context, in *rpcmodels.GetCidrsRequest, opts ...stormrpc.CallOption) (*rpcmodels.GetCidrsResponse, error)
}

type rPCAgentAkamaiClient struct {
	c *stormrpc.Client
}

func NewRPCAgentAkamaiClient(c *stormrpc.Client) RPCAgentAkamaiClient {
	return &rPCAgentAkamaiClient{c}
}

func (c *rPCAgentAkamaiClient) GetDNSMetricsAkamai(ctx context.Context, in *rpcmodels.GetDNSMetricsRequest, opts ...stormrpc.CallOption) (*rpcmodels.GetDNSMetricsResponse, error) {
	var out rpcmodels.GetDNSMetricsResponse
	r, err := stormrpc.NewRequest("rpc.RPCAgentAkamai.GetDNSMetricsAkamai", in, stormrpc.WithEncodeProto())
	if err != nil {
		return nil, err
	}

	resp := c.c.Do(ctx, r, opts...)
	if resp.Err != nil {
		return nil, resp.Err
	}

	if err = resp.Decode(&out); err != nil {
		return nil, err
	}

	return &out, nil
}

func (c *rPCAgentAkamaiClient) GetCidrs(ctx context.Context, in *rpcmodels.GetCidrsRequest, opts ...stormrpc.CallOption) (*rpcmodels.GetCidrsResponse, error) {
	var out rpcmodels.GetCidrsResponse
	r, err := stormrpc.NewRequest("rpc.RPCAgentAkamai.GetCidrs", in, stormrpc.WithEncodeProto())
	if err != nil {
		return nil, err
	}

	resp := c.c.Do(ctx, r, opts...)
	if resp.Err != nil {
		return nil, resp.Err
	}

	if err = resp.Decode(&out); err != nil {
		return nil, err
	}

	return &out, nil
}

// RPCAgentAkamaiServer is the server API for RPCAgentAkamai service.
type RPCAgentAkamaiServer interface {
	// GetDNSMetrics retrieves the total DNS metrics for a given project and timeframe.
	GetDNSMetricsAkamai(context.Context, *rpcmodels.GetDNSMetricsRequest) (*rpcmodels.GetDNSMetricsResponse, error)
	GetCidrs(context.Context, *rpcmodels.GetCidrsRequest) (*rpcmodels.GetCidrsResponse, error)
}

func RegisterRPCAgentAkamaiServer(s *stormrpc.Server, srv RPCAgentAkamaiServer) {
	for _, handler := range rPCAgentAkamaiHandlers {
		handler.SetService(srv)
		s.Handle(handler.Route(), handler.HandlerFunc())
	}
}

type _RPCAgentAkamai_GetDNSMetricsAkamai_Handler struct {
	route string
	svc   interface{}
}

func (h *_RPCAgentAkamai_GetDNSMetricsAkamai_Handler) HandlerFunc() stormrpc.HandlerFunc {
	return func(ctx context.Context, r stormrpc.Request) stormrpc.Response {
		var in rpcmodels.GetDNSMetricsRequest
		if err := r.Decode(&in); err != nil {
			return stormrpc.NewErrorResponse(r.Reply, fmt.Errorf("error decoding request"))
		}

		out, err := h.svc.(RPCAgentAkamaiServer).GetDNSMetricsAkamai(ctx, &in)
		if err != nil {
			return stormrpc.NewErrorResponse(r.Reply, err)
		}

		resp, err := stormrpc.NewResponse(r.Reply, out, stormrpc.WithEncodeProto())
		if err != nil {
			return stormrpc.NewErrorResponse(r.Reply, err)
		}

		return resp
	}
}
func (h *_RPCAgentAkamai_GetDNSMetricsAkamai_Handler) Route() string {
	return h.route
}
func (h *_RPCAgentAkamai_GetDNSMetricsAkamai_Handler) SetService(svc interface{}) {
	h.svc = svc
}

type _RPCAgentAkamai_GetCidrs_Handler struct {
	route string
	svc   interface{}
}

func (h *_RPCAgentAkamai_GetCidrs_Handler) HandlerFunc() stormrpc.HandlerFunc {
	return func(ctx context.Context, r stormrpc.Request) stormrpc.Response {
		var in rpcmodels.GetCidrsRequest
		if err := r.Decode(&in); err != nil {
			return stormrpc.NewErrorResponse(r.Reply, fmt.Errorf("error decoding request"))
		}

		out, err := h.svc.(RPCAgentAkamaiServer).GetCidrs(ctx, &in)
		if err != nil {
			return stormrpc.NewErrorResponse(r.Reply, err)
		}

		resp, err := stormrpc.NewResponse(r.Reply, out, stormrpc.WithEncodeProto())
		if err != nil {
			return stormrpc.NewErrorResponse(r.Reply, err)
		}

		return resp
	}
}
func (h *_RPCAgentAkamai_GetCidrs_Handler) Route() string {
	return h.route
}
func (h *_RPCAgentAkamai_GetCidrs_Handler) SetService(svc interface{}) {
	h.svc = svc
}

var rPCAgentAkamaiHandlers = []handler{
	&_RPCAgentAkamai_GetDNSMetricsAkamai_Handler{route: "rpc.RPCAgentAkamai.GetDNSMetricsAkamai"},
	&_RPCAgentAkamai_GetCidrs_Handler{route: "rpc.RPCAgentAkamai.GetCidrs"},
}

type handler interface {
	Route() string
	HandlerFunc() stormrpc.HandlerFunc
	SetService(interface{})
}
